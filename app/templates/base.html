<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Cobraii - Cobranças P2P{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- TailwindCSS via CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" 
        href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Work+Sans:wght@400;500;700;900" />
</head>
<body class="flex flex-col min-h-screen bg-slate-50" style='font-family: "Work Sans", "Noto Sans", sans-serif;'>
    <!-- partials/menu.html -->
    <div class="bg-white p-4 shadow-md flex justify-between items-center" style="font-family: Inter, 'Noto Sans', sans-serif;">
        {% if request.path != '/login/' %}
         {% include 'menu.html' %}
        {% endif %}
    </div>
    <div id="bank-warning" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 text-center text-sm font-medium">
    ⚠️ Você ainda não cadastrou suas configurações bancárias.
    <a href="/configuracoes/" class="underline hover:text-red-900">Clique aqui para configurar agora.</a>
    </div>
    <main class="flex-grow mt-6">
        {% block content %}
        {% endblock %}
    </main>
    <footer class="mt-auto text-center py-4 text-[#4e7397]">
        © {{ year }} Cobraii Cobranças. Todos os direitos reservados.
    </footer>
<script>
  async function checkBankSettings() {
    const token = localStorage.getItem("authToken");
    if (!token) return;

    try {
      const response = await fetch("/api/users/bank/me/", {
        headers: {
          "Authorization": "Token " + token,
          "Content-Type": "application/json",
        },
      });

      if (response.status === 404) {
        // Não cadastrado → exibir aviso
        document.getElementById("bank-warning").classList.remove("hidden");
      }
    } catch (error) {
      console.error("Erro ao verificar configurações bancárias:", error);
    }
  }

  document.addEventListener("DOMContentLoaded", checkBankSettings);
</script>
</body>
</html>
